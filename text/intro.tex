\section{Введение}
\subsection{Актуальность и значимость}

\subsection{Постановка задачи}
В качестве блокчейна используется NEAR protocol\cite{nearprotocol_2022}. NEAR Protocol работает по схеме Proof-of-Stake(Pos) \cite{nearprotocolpos}. Отличительные черты относительно других блокчейнов - улучшенная масштабируемость, производительность, а также простота реализации приложений.

\begin{definition}
    Блокчейн - децентрализованная база данных, которая содержит информацию о всех операциях произведенных в ней.
    Информация об операциях хранится в виде цепочки блоков.  Удалить или изменить цепочку блоков невозможно, все это защищено криптографическими методами. Самым первым блокчейном является Bitcoin\cite{nakamoto2012bitcoin}.
\end{definition}

\begin{definition}
    DApps --- это приложения, которые включают логику работы с функциями блокчейна~\cite{ramamurthy2020blockchain}.
\end{definition}

Самой значимой частью реализации DApp являются Smart-контракты. Копии Smart-контрактов разворачивается с помощью специальной транзакции на всех узлах-участниках и исполняются в сети блокчейна.

\begin{definition}
    Smart-контракт --- это неизменяемый исполняемый код, представляющий логику DApp, работающий в блокчейне~\cite{ramamurthy2020blockchain}. Часто сокращают до слова контракт. В некоторых протоколах называют по-другому, например в Solana - это программы\cite{solanaprogramlibrarydocs}.
\end{definition}

\begin{definition}
    Транзакция — это наименьшая единица работы, которая может быть назначена сети блокчейна. Работа в данном случае означает вычисление(выполнение функции) или хранение(чтение/запись данных)\cite{neardocumentationtransaction}.
\end{definition}

\begin{definition}
    Узлы-участники/валидаторы - множество машин, которое обрабатывает транзакции в блокчейне.
\end{definition}

Для написания smart-контрактов Near protocol предоставляет sdk на языках Rust и AssemblyScript(near-sdk-rs\cite{nearsdkrs} и near-sdk-as\cite{nearsdkas} соответственно). В данном проекте smart-контракты NFT и маркетплейса реализовываются на языке Rust.

Discord-бот реализуется на языке программирования TypeScript, используя near-api-js\cite{nearapijs}. Discord-бот либо запускает <<view operations>>, для получения метаданных аккаунта и view методов NFT, маркетплейс smart-контрактов; либо, при <<change operations>> создает транзакции и предоставляет url для NEAR Wallet аккаунта пользователя. Discord API представляет множественный функционал для общения пользователя с ботом: slash-команды\cite{discordjsbuttons}, контекстные меню\cite{discordtscontextmenu}, меню выбора\cite{discordjsselectmenus}, кнопки\cite{discordjsbuttons}, модалы\cite{discordjsmodals}(новый функционал, который нужно будет поддержать в ближайшем будущем).

\begin{definition}
    Discord - популярное приложение для группового чата, изначально было создано для того, чтобы дать геймерам место для создания сообществ и общения.
\end{definition}

\begin{remark}
    Каждый smart-контракт в Near(написанный на Rust/Assembly Script) переводится в WebAssembly(Wasm), который исполняет виртуальная машина на участвующем узле(валидаторе) блокчейна. У smart-контракта, есть два вида функций: которые меняют состояние блокчейна - <<change operations>> и <<view operations>> - не меняют состояние блокчейна. Каждая транзакция имеет некоторое денежное обложение, которое измеряется в <<Gas>>. Gas - это сборы на исполнение транзакции, данные единицы - детерминированы, то есть одна и та же транзакция всегда имеет одинаковое обложение в Gas. Стоимость Gas пересчитывается в зависимости от загруженности сети в блокчейне \cite{neargas}.
\end{remark}

\subsection{Этапы проекта}
В рамках групповой курсовой работы была поставлена цель реализации discord-бота с функционалом NFT маркетплейса в NEAR protocol и сервисом генерации NFT, используя генеративно-состязательную сеть. Для реализации данной цели были выделены следующие этапы:
\begin{itemize}
    \item Изучить теоретический базис связанный с NEAR Protocol(Лущ, Басалаев, Токкожин, Кусиденов)
    \item Реализовать smart-контракты(Басалаев):
    \begin{itemize}
        \item
    \end{itemize}
    \item Разработать discord-бота(Лущ):
    \begin{itemize}
        \item Изучить Javascript/Typescript;
        \item Изучить основы работы с браузером через Javascript(сессионное/локальное хранилище браузера, класс window);
        \item Изучить near-api-js и его кода для дальнейшего его переписывания под функциональность discord;
        \item Реализовать KeyStore\cite{nearclasskeystore} работающий через Redis\cite{redis};
        \item Написать реализацию авторизации в Near Wallet\cite{nearwallet} через discord-бота, который использует вышеописанный KeyStore;
        \item Написать реализацию создания url на подпись транзакции/транзакций(одна транзакция\footnote{В данном контексте класс Transaction\cite{nearclasstransaction}}, один Action\cite{nearclassaction}; одна транзакция, несколько Action; несколько транзакций, несколько Action);
        \item Создание <<Профиля пользователя>>. Вызов осуществляется через slash-команду\cite{discordjsslashcommands} или контекстное меню;
        \item Реализация просмотра списка NFT, которыми владеет пользователь, которые продает пользователь, которые продаются на всем маркетплейсе. Вызовы осуществляются через контекстные меню, slash-команды, кнопки в профиле пользователя. Список выглядит по-разному в зависимости от количества NFT, если NFT больше определенного количества, то будет подгружаться только часть в целях оптимизации ресурсов и листаться это множество будет через меню выбора;
        \item Поддержка покупки, продажи, отмены продажи NFT. Вызовы в виде кнопок при просмотре NFT списка;
        \item Изучение децентрализованных распределенных хранилищ;
        \item Реализация mint(создания) NFT с использованием децентрализованных распределенных хранилища;
        \item Поддержка изменения цены NFT // пока что не сделано, но сделан метод в smart-контракте;
        \item Поддержать сервис c генеративно-состязательной сетью в discord-боте // пока что не сделано;
        \item Сделать docker образ для удобного деплоя discord-бота;
        \item Деплой discord-бота на облачный сервис(Кусиденов);
    \end{itemize}
    \item Реализовать генеративно-состязательную сеть(Токкожин):
    \item Реализовать сервис с генеративно-состязательной сетью(Кусиденов):
\end{itemize}

\subsection{Структура работы}

Работа организована следующим образом. В разделе \hyperref[section.3]{\color{blue} 3} дается обзор существующих на сегодняшний день маркетплейсов на NEAR Protocol и (что-то про ган). Раздел \hyperref[section.4]{\color{blue} 4} описывает устройство и реализацию smart-контрактов NFT и маркетплейса. В \hyperref[section.5]{\color{blue} 5} разделе идет описание трудностей и их решения в разработке discord-бота.

